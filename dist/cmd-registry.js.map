{"version":3,"sources":["../src/cmd-registry.es6"],"names":[],"mappings":";;;;;;;;;;IAAqB;AAEjB,aAFiB,eAEjB,GAAe;8BAFE,iBAEF;;AAEX,aAAK,IAAL,GAAY,EAAZ,CAFW;KAAf;;iBAFiB;;iCAYP,KAAK,aAAa,SAAS;;AAEjC,gBAAI,QAAQ,GAAR,CAF6B;AAGjC,kBAAM,IAAI,KAAJ,CAAU,KAAV,EAAiB,CAAjB,CAAN,CAHiC;;AAKjC,iBAAK,IAAL,CAAU,IAAV,CAAe,GAAf,EALiC;;AAOjC,iBAAK,gBAAgB,UAAhB,CAA2B,GAA3B,CAAL,IAAwC;AACpC,uBAAO,KAAP;AACA,6BAAa,WAAb;AACA,yBAAS,OAAT;aAHJ,CAPiC;;AAajC,mBAAO,IAAP,CAbiC;;;;kCAiB1B;AACP,mBAAO,KAAK,IAAL,CAAU,KAAV,CAAgB,CAAhB,CAAP,CADO;;;;4BAIN,KAAK,WAAW;;AAEjB,gBAAI,KAAK,IAAL,CAAU,OAAV,CAAkB,GAAlB,IAAyB,CAAzB,EAA4B;AAC5B,sBAAM,IAAI,KAAJ,6BAAmC,UAAnC,CAAN,CAD4B;aAAhC;;AAIA,gBAAI,iBAAiB,KAAK,gBAAgB,UAAhB,CAA2B,GAA3B,CAAL,EAAsC,OAAtC,CANJ;AAOjB,gBAAI,UAAU,IAAI,cAAJ,CAAmB,SAAnB,CAAV,CAPa;;AASjB,oBAAQ,GAAR,GATiB;;;;mCAzBF,KAAK;AACpB,mBAAU,YAAV,CADoB;;;;WARP","file":"cmd-registry.js","sourcesContent":["export default class CommandRegistry {\n\n    constructor () {\n\n        this.cmds = [];\n\n    }\n\n    static commandKey (cmd) {\n        return `${cmd}-cmd`;\n    }\n\n    register (cmd, description, handler) {\n\n        var usage = cmd;\n        cmd = cmd.split(/\\s+/)[0];\n\n        this.cmds.push(cmd);\n\n        this[CommandRegistry.commandKey(cmd)] = {\n            usage: usage,\n            description: description,\n            handler: handler,\n        };\n\n        return this;\n\n    }\n\n    listAll () {\n        return this.cmds.slice(0);\n    }\n\n    run (cmd, xublitCli) {\n\n        if (this.cmds.indexOf(cmd) < 0) {\n            throw new Error(`Unrecognised command \"${cmd}\"`);\n        }\n\n        var CommandHandler = this[CommandRegistry.commandKey(cmd)].handler;\n        var command = new CommandHandler(xublitCli);\n\n        command.run();\n\n    }\n\n}\n"]}