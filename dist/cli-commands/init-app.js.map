{"version":3,"sources":["../../src/cli-commands/init-app.es6"],"names":[],"mappings":";;;;;;;;;;IAAY;;;;;;;;;;;;;;;;;;IAKS;;;AAEjB,aAFiB,cAEjB,CAAa,SAAb,EAAwB;8BAFP,gBAEO;;sEAFP,2BAIP,YAFc;KAAxB;;iBAFiB;;8BAQV;;AAEH,gBAAI,iBAAiB,mCAAmB,KAAK,SAAL,CAApC,CAFD;;AAIH,mCAAuB,IAAvB,EAA6B,cAA7B,EAJG;;AAMH,2BAAe,WAAf,GANG;;;;WARU;;;;;;AAoBrB,SAAS,sBAAT,CAAiC,cAAjC,EAAiD,cAAjD,EAAiE;;AAE7D,mBAAe,EAAf,CAAkB,OAAlB,EAA2B,UAAU,MAAV,EAAkB;;AAEzC,YAAI,MAAJ,EAAY;AACR,2BAAe,GAAf,CAAmB,OAAnB,EAA4B,MAA5B,EADQ;SAAZ;;AAIA,uBAAe,aAAf,CAA6B,kBAA7B,EANyC;;AAQzC,gBAAQ,IAAR,CAAa,CAAb,EARyC;KAAlB,CAA3B,CAF6D;;AAc7D,mBAAe,EAAf,CAAkB,UAAlB,EAA8B,UAAU,OAAV,EAAmB;;AAE7C,uBAAe,aAAf,CAA6B,KAAK,MAAL,CACzB,wCADyB,EACiB,OADjB,CAA7B,EAF6C;;AAM7C,gBAAQ,IAAR,GAN6C;KAAnB,CAA9B,CAd6D;;AAwB7D,mBAAe,EAAf,CAAkB,eAAlB,EAAmC,UAAU,KAAV,EAAiB;;AAEhD,YAAI,YAAY,MAAM,WAAN,CAAkB,IAAlB,CAFgC;AAGhD,YAAI,eAAe,MAAM,OAAN,CAH6B;;AAKhD,uBAAe,aAAf,CAA6B,kBAA7B,EAAiD,YAAjD,EALgD;;AAOhD,uBAAe,aAAf,CAA6B,MAAM,KAAN,CAA7B,CAPgD;;AAShD,gBAAQ,IAAR,CAAa,CAAb,EATgD;KAAjB,CAAnC,CAxB6D;;AAqC7D,mBAAe,EAAf,CAAkB,cAAlB,EAAkC,YAAY;AAC1C,uBAAe,GAAf,CAAmB,MAAnB,EAA2B,gCAA3B,EAD0C;KAAZ,CAAlC,CArC6D;;AAyC7D,mBAAe,EAAf,CAAkB,kBAAlB,EAAsC,UAAU,OAAV,EAAmB;AACrD,uBAAe,aAAf,CAA6B,OAA7B,EADqD;KAAnB,CAAtC,CAzC6D;CAAjE","file":"init-app.js","sourcesContent":["import * as util from 'util';\nimport CliCommand from './abstract';\n\nimport { AppInitialiser } from '../cli-tools/app-initialiser';\n\nexport default class InitAppCommand extends CliCommand {\n\n    constructor (xublitCli) {\n\n        super(xublitCli);\n\n    }\n\n    run () {\n\n        var appInitialiser = new AppInitialiser(this.xublitCli);\n\n        bindInitEventListeners(this, appInitialiser);\n\n        appInitialiser.interactive();\n\n    }\n\n}\n\nfunction bindInitEventListeners (initAppCommand, appInitialiser) {\n\n    appInitialiser.on('abort', function (reason) {\n\n        if (reason) {\n            initAppCommand.log('white', reason);\n        }\n\n        initAppCommand.reportWarning('App init aborted');\n\n        process.exit(1);\n\n    });\n\n    appInitialiser.on('complete', function (appName) {\n\n        initAppCommand.reportSuccess(util.format(\n            'Xublit app %s successfully initialised', appName\n        ));\n\n        process.exit();\n\n    });\n\n    appInitialiser.on('criticalError', function (error) {\n        \n        var errorType = error.constructor.name;\n        var errorMessage = error.message;\n\n        initAppCommand.reportFailure('App init failed:', errorMessage);\n        \n        initAppCommand.writeToStderr(error.stack);\n\n        process.exit(1);\n\n    });\n\n    appInitialiser.on('initialising', function () {\n        initAppCommand.log('cyan', '\\nInitialising Xublit app...\\n');\n    });\n\n    appInitialiser.on('successfulAction', function (details) {\n        initAppCommand.reportSuccess(details);\n    });\n\n}\n"]}